{"version":3,"sources":["../../../src/main/config/database.js"],"names":["require","config","connected","chalk","bold","cyan","error","yellow","disconnected","red","termination","magenta","process","env","NODE_ENV","DB_URL","keys","DB_URL_PRODUCTION","DB_URL_DEVELOPMENT","database","mongoose","connect","useCreateIndex","useNewUrlParser","useFindAndModify","useUnifiedTopology","connection","on","logger","info","console","log","err","close","exit"],"mappings":";;;;;;;;;AAEA;;AACA;;AACA;;AACA;;AALAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB,G,CACA;;;AAMA,IAAMC,SAAS,GAAGC,kBAAMC,IAAN,CAAWC,IAA7B;AACA,IAAMC,KAAK,GAAGH,kBAAMC,IAAN,CAAWG,MAAzB;AACA,IAAMC,YAAY,GAAGL,kBAAMC,IAAN,CAAWK,GAAhC;AACA,IAAMC,WAAW,GAAGP,kBAAMC,IAAN,CAAWO,OAA/B;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACvC,MAAMC,OAAM,GAAGC,WAAKC,iBAApB;AACH;;AAED,IAAMF,MAAM,GAAGC,WAAKE,kBAApB;;AAEO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAK;AAC3BC,uBAASC,OAAT,CAAiBN,MAAjB,EAAyB;AACzBO,IAAAA,cAAc,EAAE,IADS;AAEzBC,IAAAA,eAAe,EAAE,IAFQ;AAGzBC,IAAAA,gBAAgB,EAAE,KAHO;AAIzBC,IAAAA,kBAAkB,EAAE;AAJK,GAAzB;;AAOAL,uBAASM,UAAT,CAAoBC,EAApB,CAAuB,WAAvB,EAAoC,YAAW;AAC9CC,sBAAOC,IAAP,CAAY,qCAAZ;;AACDC,IAAAA,OAAO,CAACC,GAAR,CAAY7B,SAAS,CAAC,qCAAD,CAArB;AACA,GAHA;;AAKDkB,uBAASM,UAAT,CAAoBC,EAApB,CAAuB,OAAvB,EAAgC,UAASK,GAAT,EAAc;AAE7CF,IAAAA,OAAO,CAACC,GAAR,CACCzB,KAAK,CAAC,6CAA6C0B,GAA7C,GAAmD,QAApD,CADN;AAGA,GALD;;AAOAZ,uBAASM,UAAT,CAAoBC,EAApB,CAAuB,cAAvB,EAAuC,YAAW;AACjDG,IAAAA,OAAO,CAACC,GAAR,CAAYvB,YAAY,CAAC,6CAAD,CAAxB;AACA,GAFD;;AAICI,EAAAA,OAAO,CAACe,EAAR,CAAW,QAAX,EAAqB,YAAW;AAChCP,yBAASM,UAAT,CAAoBO,KAApB,CAA0B,YAAW;AACpCH,MAAAA,OAAO,CAACC,GAAR,CACCrB,WAAW,CACV,4EADU,CADZ;AAKAE,MAAAA,OAAO,CAACsB,IAAR,CAAa,CAAb;AACA,KAPD;AAQA,GATA;AAUD,CAlCM","sourcesContent":["require('dotenv').config();\r\n//Import the mongoose module\r\nimport mongoose from 'mongoose'\r\nimport chalk from 'chalk'\r\nimport {keys} from './keys'\r\nimport logger from '../logger/index'\r\n\r\nconst connected = chalk.bold.cyan;\r\nconst error = chalk.bold.yellow;\r\nconst disconnected = chalk.bold.red;\r\nconst termination = chalk.bold.magenta;\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n    const DB_URL = keys.DB_URL_PRODUCTION\r\n}\r\n\r\nconst DB_URL = keys.DB_URL_DEVELOPMENT\r\n\r\nexport const database = ()=> {\r\n  mongoose.connect(DB_URL, {\r\n\t\tuseCreateIndex: true,\r\n\t\tuseNewUrlParser: true,\r\n\t\tuseFindAndModify: false,\r\n\t\tuseUnifiedTopology: true,\r\n\t})\r\n\r\n  mongoose.connection.on('connected', function() {\r\n\t  logger.info('Mongoose default connection is open')\r\n\t\tconsole.log(connected('Mongoose default connection is open'));\r\n\t});\r\n\r\n\tmongoose.connection.on('error', function(err) {\r\n\r\n\t\tconsole.log(\r\n\t\t\terror('Mongoose default connection has occured ' + err + ' error')\r\n\t\t);\r\n\t});\r\n\r\n\tmongoose.connection.on('disconnected', function() {\r\n\t\tconsole.log(disconnected('Mongoose default connection is disconnected'));\r\n\t});\r\n\r\n  process.on('SIGINT', function() {\r\n\t\tmongoose.connection.close(function() {\r\n\t\t\tconsole.log(\r\n\t\t\t\ttermination(\r\n\t\t\t\t\t'Mongoose default connection is disconnected due to application termination'\r\n\t\t\t\t)\r\n\t\t\t);\r\n\t\t\tprocess.exit(0);\r\n\t\t});\r\n\t});\r\n}"],"file":"database.js"}